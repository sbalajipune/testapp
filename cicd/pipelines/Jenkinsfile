try {
 timeout(time: 20, unit: 'MINUTES') {
      node("nodejs") {
		// download and configure all common cicd stuff
        dir('cicd') {
            git "https://github.com/sbalajipune/testapp.git"
            // load groovy functions
            newman = load 'cicd/pipelines/functions/newman.groovy'
        }
        stage("Integration tests") {
              newman.runTest("cicd/member-service/tests/member-service.postman_collection.json", "cicd/member-service/tests/dev.postman_environment.json")
          }
      }
    }
} catch (err) {
 echo "in catch block"
 echo "Caught: ${err}"
 currentBuild.result = 'FAILURE'
 throw err
}